<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>Sync and Async</h2>
        <script>

        // console.log("1. Open BMS");
        // console.log("2. Search Movie");
        // console.log("3. select Time");
        // console.log("4. select Seat");
        // console.log("5. Book Ticket");


        // setTimeout(() => {
        //     console.log("1. Open BMS");
        // }, 1000);

        // setTimeout(() => {
        //     console.log("2. Search Movie");
        // }, 5000);

        // setTimeout(() => {
        //     console.log("3. select Time");
        // }, 2500);

        // setTimeout(() => {
        //     console.log("4. select Seat");
        // }, 3000);

        // setTimeout(() => {
        //     console.log("5. Book Ticket");
        // }, 3500);


        // Async
        // setTimeout(() => {
        //     console.log("1. Open BMS");
        //     setTimeout(() => {
        //         console.log("2. Search Movie");
        //         setTimeout(() => {
        //             console.log("3. select Time");
        //             setTimeout(() => {
        //                 console.log("4. select Seat");
        //                 setTimeout(() => {
        //                 console.log("5. Book Ticket");
        //                 }, 100);
        //             }, 3000);
        //         }, 0);
        //     }, 1000);
        // }, 100);


        // Promise
        // let p = new Promise((resolved, reject) => {
        //     app = "BMS";
        //     if (app === "BMS") 
        //         resolve("open book my show");
            
        //     else 
        //         reject("Galat app hai");
            
        // })
        // p.then((msg) => {
        //     console.log(msg);
        //     console.log("Search Movies");
        // })
        // p.then(() => {
        //     console.log("select seat");
        // })
        // p.then(() => {
        //     console.log("ticket booking");
        // })
        // p.then(() => {
        //     console.log("select seat");
        // })

        // p.catch ((e) => {
        //     console.log(e.message);
        // })
        // p.finally (() => {
        //     console.log("Close BMS App")
        // });


        // promise with setTimeout
        // p = new Promise((resolve, reject) =>  {
        //     setTimeout(() => {
        //         let app = "BMS";
        //         if(app === "BMS") {
        //             resolve("1. Open BookMyShow");
        //         } else {
        //             reject(new Error("BMS not found"))  
        //         }
        //     }, 3000);
        // });

        // p.then((app) =>  {
        //     return new Promise((resolve) => {
        //         setTimeout(() => {
        //             console.log(`2. Opened ${app}`);
        //             resolve();
        //         }, 2000);
        //     });
        // })

        // .then(() => {
        //     return new Promise((resolve) => {
        //         setTimeout(() => {
        //             console.log("3. Search for the movie");
        //             resolve();
        //         }, 4000);
        //     });
        // })

        // .then(() => {
        //     return new Promise((resolve) => {
        //         setTimeout(() => {
        //             console.log("4. Select seats");
        //             resolve();
        //         }, 8000);
        //     });
        // })

        // .then(() => {
        //     return new Promise((resolve) => {
        //         setTimeout(() => {
        //             console.log("5. Ticket Booked");
        //             resolve();
        //         }, 1000);
        //     });
        // })

        // .catch ((err) => {
        //     console.log("Error: ", err.message);
        // })

        // .finally (() => {
        //     setTimeout(() => {
        //         console.log("Closed phone")
        //     }, 6000);
        // });


        //Async and await
        async function main() {
        console.log("Start process..."); 

        // Step 1: Open app 

        await new Promise((resolve) => setTimeout(resolve, 2000)); 
        console.log("Step 1: Opened app"); 

        // Step 2: Searching for a movie 

        await new Promise((resolve) => setTimeout(resolve, 5000)); 
        console.log("Step 2: Searching for a movie"); 

        // Step 3: Select Seats 

        await new Promise((resolve) => setTimeout(resolve, 8000)); 
        console.log("Step 3: Select seats"); 

        // Step 4: Ticket booked 

        await new Promise((resolve) => setTimeout(resolve, 1000)); 
        console.log("Step 4: Ticket Booked"); 

        console.log("Process complete!"); 
        } 
        main();
           
        
        //optimized way
        function wait(ms){
        return new Promise((resolve)=> setTimeout(resolve, ms)) 
        }
        async function Bookticket(){
        try{
            const app = "BS";
            await wait(2000);
            if(app === "BMS") {
            console.log("1. Open Book my show - 2 sec");
            }else{
            throw new Error("BMS not found"); 
            }
        
            await wait(4000);
            console.log("2. Serach for movie - 4 sec");
            await wait(3000);
            console.log("3. Select Seats - 3sec");
            await wait(1000);
            console.log("4. Ticket Booked - 3sec");
            console.log("Close Phone");
        }
        catch(er){
            console.log(er.message);
        }
        finally {
            console.log("Close phone");
        }
        }
    
        Bookticket();
        </script>

</body>
</html>